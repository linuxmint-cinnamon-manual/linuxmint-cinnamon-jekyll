    <h2 id="toc241"><a id="RefHeading19241713816058"></a><a id="bkmRefHeading19241713816058"></a><a id="toc240"></a><a id="bkmtoc240"></a><a id="RefHeading22049803676888"></a><a id="bkmRefHeading22049803676888"></a><a id="bkmRefHeading22049803676888"></a><a id="bkmbkmRefHeading22049803676888"></a>Вместо заключения. Порядок действий при настройке</h2>
    <p class="Textbody">Обычно в заключении к книгам, подобных  <a href="http://alv.me/?p=8357">этой</a><a href="http://alv.me/?p=8357"> </a>, принято писать общие слова о достоинствах предмета описания (а заодно и автора оного). Отступлю от этой традиции и довольно конкретно опишу, в каком порядке лучше всего выполнять манипуляции по настройке дистрибутива Mint и среды Cinnamon, опираясь на всё изложенное выше в этих очерках. Разумеется, здесь в конспективном виде приводится мой личный алгоритм действий — как всегда, не в качестве образца для подражания, а как напоминание о необходимости выработки алгоритма собственного. </p>
    <p class="Textbody">Первое, что я делаю после установки почти любого дистрибутива, с почти любой рабочей средой (и Mint с его Cinnamon не исключение) — переименовываю стандартные подкаталоги в своём домашнем каталоге. Если устанавливать систему с русской локалью, по умолчанию список этих подкаталогов будет таким:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ ls -1 ~/</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Видео</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Документы</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Загрузки</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Изображения</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Музыка</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Общедоступные</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Рабочий стол</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Шаблоны</span> </p>
    <p class="Textbody">Что, конечно же, соответствует пресловутому  <a href="http://www.freedesktop.org/wiki/Software/xdg-user-dirs/" target="_blank">стандарту freedesktop.org</a><a href="http://www.freedesktop.org/wiki/Software/xdg-user-dirs/" target="_blank"> </a>. Но, по понятным причинам, крайне не удобно при работе в CLI. Зато легко исправляется такой командой: </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ LANG=C xdg-user-dirs-gtk-update --force</span> </p>
    <div style="text-align:center">
      <img alt="Изображение602" class="frameGraphics" id="602graphic" src="Alexey_Alv_Fedorchuk_Linux_Mint_i_ego_Cinnamon-img/Alexey_Alv_Fedorchuk_Linux_Mint_i_ego_Cinnamon-img1.png" style="width:645.01416px;height:464.01263px" />
    </div>
    <p class="Textbody">Вместо  LANG=C  можно указать  LANG=POSIX  или  LANG=en_US , это одно и то же. И в любом случае за этим последует панель с запросом подтверждения: С ним следует согласиться, предварительно поставив «птицу» в боксике  Don't ask methis again , чтобы в дальнейшем избежать повторения вопроса. После чего список подкаталогов в домашнем каталоге мгновенно приобретёт такой вид: </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ ls -1 ~/</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Desktop/</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Documents/</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Downloads/</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">lost+found/</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Music/</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Pictures/</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Public/</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Templates/</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">Videos/</span> </p>
    <p class="Textbody">Который позвволяет более не задумываться о переключении раскладки клавиатуры во время навигации по файловой системе.</p>
    <p class="Textbody">Следующие мои действия — создание комфортной среды обитания меня, любимого, что начинается с установки любимой оболочки Zsh:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ apt install zsh</span> </p>
    <p class="Textbody">Затем копирование (с внешнего носителя или из сети, например, с Яндекс.диска) моих конфигов для неё в домашний каталог:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ cp path2/{.zshrc,.zshenv} mytmp ~/</span> </p>
    <p class="Textbody" style="font-family:&#39;Helvetica Neue&#39;, Helvetica, sans-serif;font-style:normal;font-variant:normal;font-weight:normal;font-size:17.0px;color:#333333;letter-spacing:1.0px;text-transform:none">И, наконец, превращение Zsh в login shell:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ chsh -s /bin/zsh</span> </p>
    <p class="Textbody">Как я уже гворил, в последнее время без выпадающего терминала я чувствую себя как без рук. И потому следующий шаг — установка оного:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ apt install tilda</span> </p>
    <p class="Textbody">И внесение программы Tilda в список для  Автозапуска  в секции  Параметры   Ситемных настроек  среды Cinnamon. </p>
    <p class="Textbody">Раньше одним из первых моих действий по настройке среды была смена шрифтов интерфейса. Однако с появлением в Mint семейства гарнитур Notos оказалось, что в штатной теме оформления Cinnamon, именуемой Mint-X, меня в общем всё устраивает по умолчанию, а всякими частными украшательствами, типа подбора нескучных обоев и скринсейвером, я занимаюсь на досуге, под настроение.</p>
    <p class="Textbody">А вот что для меня важно в среде обитания — это настройка клавиатуры, в которую для меня входят:</p>
    <ul style="margin-top:0;margin-bottom:0;list-style-type:disc;clear:left">
      <li>
        <p class="Standard">включение привычных хоткеев для переключения между рабочими областями и управления окнами, в том числе их тайлингом;</p>
      </li>
      <li>
        <p class="Standard">установка привычного варианта русской раскладки (Typewriter Legacy);</p>
      </li>
      <li>
        <p class="Standard">выбор подходящих переключателей раскладки, клавиши  Compose  и некоторых других параметров совместимости. </p>
      </li>
    </ul>
    <p class="Textbody">Первоочередность установки языково-зависимых параметров клавиатуры вызвана тем, что обустройство в новой системе я почти всегда сочетаю с описанием этого процесса, которое выполняю на языке родных осин. И — в любимом текстовом редакторе, роль которого последнее время выполняет Komodo Edit, каковой устанавливается в это же время:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ apt install komodo-edit komodo-edit-ru</span> </p>
    <p class="Textbody">И из внешнего источника в каталог  ~/.komodoedit  копируются необходимые конфиги и макросы. В том числе и словарные файлы для проверки русской орфографии, что требует предварительного подключения следующих репозиториев: </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ sudo add-apt-repository -y ppa:mystic-mirage/komodo-edit</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ sudo add-apt-repository -y ppa:andrew-crew-kuznetsov/crew</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ sudo apt update</span> </p>
    <p class="Textbody">Сочиняемые описания обычно нужно иллюстрировать скриншотами. А поскольку штатное средство для этого, имеющееся в Cinnamon, ниже всякой критики, то заодно устанавливается и соответствующий инструмент:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ apt install shutter</span> </p>
    <p class="Textbody">Все эти вопросы были подробно рассмотрены в соответствующих очерках, и здесь я вдаваться в детализацию не буду.</p>
    <p class="Textbody">Создав таким образом подходящую среду как для дальнейших действий, так и для их описания, можно заняться разборками с файловыми системами и системами размещения данных — в моём домашнем каталоге хранятся только файлв настроек приложений, рабочие данные я размещаю вне его.</p>
    <p class="Textbody">Тут первое, что можно (если нужно) сделать — это отключить журналирование для файловой системы ext4, на которой у меня располагаются корень файловой иерархии и его ветвь  ~/  (то есть, точнее,  /home/alv ). Делается это такими командами: </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ sudo tune2fs -O ^has_journal /dev/sda1</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ sudo tune2fs -O ^has_journal /dev/sda2</span> </p>
    <p class="Textbody">А успех операции проверяется командой</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ sudo tune2fs -l /dev/sda# | grep journal</span> </p>
    <p class="Textbody">которая должна просто вернуть приглашение командной строки.</p>
    <p class="Textbody">Вопрос о том, нужно ли отключать журналирование для ext4, я здесь обсуждать не буду — ответ на него каждый должен дать себе сам.</p>
    <p class="Textbody">Далее возможны варианты в зависимости от того, что предполагается использовать для хранения данных — LVM, softRAID или ZFS. Первый случай ни к каким подготовительным действиям не обязывает — к созданию физических томов и их групп, а также логических групп и томов поверх них можно приступать сразу, с помощью соответствующих консольных утилит. Однако, если есть желание воспользоваться интегрирующей их графической оболочкой, сооветствующий пакет надо установить:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ apt install system-config-lvm</span> </p>
    <p class="Textbody">Если для размещения данных был выбран softRAID, то пакет для работы с ним должен быть установлен в обязательном порядке, в стандартной установке Mint таковой отсутствует:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ apt install mdadm</span> </p>
    <p class="Textbody">Больше всего телодвижений потребует использование ZFS. И тут проще всего начать с получения «бессрочных» административных прав:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd">$ sudo -i</span> </p>
    <p class="Textbody">После чего подключить нужный репозиторий и обновить кеш:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd"># add-apt-repository ppa:zfs-native/stable</span> </p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd"># apt update</span> </p>
    <p class="Textbody">Затем построить дерево зависимостей:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd"># apt build-dep ubuntu-zfs</span> </p>
    <p class="Textbody">Далее — собрать пакеты поддержки:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd"># apt install ubuntu-zfs</span> </p>
    <p class="Textbody">И, наконец, загрузив модули, необходимые для работы ZFS:</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd"># modprobe zfs</span> </p>
    <p class="Textbody">проверить результат командой</p>
    <p class="Textbody" style="font-family:Courier, monospace;font-style:normal;font-variant:normal;font-weight:normal;color:#222222;letter-spacing:1.0px;text-transform:none"><span style="background-color:#dddddd"># lsmod | grep zfs</span> </p>
    <p class="Textbody">Теперь наступает этап массового удаления ненужных пакетов и установки нужных. Останавливаться на нём я не буду — во-первых, это дело индивидуальных вкусов, а во-вторых, последнее время я устанавливаю Mint с самосборных образов, изготовленных посрджеством UCK, как было описано в последнем очерке. В этих образах ничего ненужного уже нет, а (почти) всё нужное присутствует.</p>
    <p class="Textbody" style="font-family:&#39;Helvetica Neue&#39;, Helvetica, sans-serif;font-style:normal;font-variant:normal;font-weight:normal;font-size:17.0px;color:#333333;letter-spacing:1.0px;text-transform:none">Так что — за работу, товарищи!</p>
